var ApiClient,SimplePromise,Traitify,console;Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,s,r,o,a,l;if(s=void 0,n=void 0,r=void 0,"undefined"==typeof this||null===this)throw new TypeError(" this is null or not defined");if(i=Object(this),a=i.length>>>0,"function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(s=e),n=new Array(a),r=0;a>r;)o=void 0,l=void 0,r in i&&(o=i[r],l=t.call(s,o,r,i),n[r]=l),r++;return n}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";var e,n,i,s,r,o;if(void 0===this||null===this)throw new TypeError;if(s=Object(this),n=s.length>>>0,"function"!=typeof t)throw new TypeError;for(i=[],r=arguments[1],e=0;n>e;)e in s&&(o=s[e],t.call(r,o,e,s)&&i.push(o)),e++;return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e,n;for(n=this.length>>>0,e=Number(arguments[1])||0,e=0>e?Math.ceil(e):Math.floor(e),0>e&&(e+=n);n>e;){if(e in this&&this[e]===t)return e;e++}return-1}),console||(console={log:function(){}}),Object.keys||(Object.keys=function(){"use strict";var t,e,n,i;return i=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=t.length,function(s){var r,o,a;if("object"!=typeof s&&("function"!=typeof s||null===s))throw new TypeError("Object.keys called on non-object");a=[],o=void 0,r=void 0;for(o in s)i.call(s,o)&&a.push(o);if(n)for(r=0;e>r;)i.call(s,t[r])&&a.push(t[r]),r++;return a}}()),SimplePromise=function(t){var e;return e=Object(),e.then=function(t){return e.thenCallback=t,e.resolved&&e.thenCallback(e.data),e},e.resolved=!1,e.resolve=function(t){return e.data=t,e.thenCallback?e.thenCallback(t):e.resolved=!0,e},e["catch"]=function(t){return e.rejected?t(e.error):e.rejectCallback=t,e},e.rejected=!1,e.reject=function(t){return e.error=t,e.rejectCallback?e.rejectCallback(t):e.rejected=!0,e},t(e.resolve,e.reject),e},ApiClient=function(){function t(){this.host="https://api.traitify.com",this.version="v1",this.oldIE="undefined"!=typeof XDomainRequest?!0:!1,this.beautify=!1,this.XHR=XMLHttpRequest}return t.prototype.online=function(){return navigator.onLine},t.prototype.setBeautify=function(t){return this.beautify=t,this},t.prototype.setHost=function(t){return t.match(/http/)||(t="https://"+t),this.oldIE&&(t=t.replace("https://","").replace("http://",""),t=location.protocol+"//"+t),this.host=t,this},t.prototype.setPublicKey=function(t){return this.publicKey=t,this},t.prototype.setVersion=function(t){return this.version=t,this},t.prototype.ajax=function(t,e,n,i){var s,r,o,a,l,c,d,f;if(s=this.beautify,d=this.host+"/"+this.version+e,f=new this.XHR,"withCredentials"in f&&!this.oldIE)f.open(t,d,!0);else{if("undefined"==typeof XDomainRequest)return new SimplePromise(function(t,e){return e("CORS is Not Supported By This Browser")});this.oldIE&&(c=(new Date).getTime(),d+=-1===d.indexOf("?")?"?authorization="+this.publicKey+"&reset_cache="+c:"&authorization="+this.publicKey+"&reset_cache="+c),f=new XDomainRequest,f.open(t,d)}return f&&!this.oldIE&&(f.setRequestHeader("Authorization","Basic "+btoa(this.publicKey+":x")),f.setRequestHeader("Content-type","application/json"),f.setRequestHeader("Accept","application/json")),l=this,o=this.online(),r=this.oldIE,a=new SimplePromise(function(t,e){var a;if(l.reject=e,!o)return l.reject();try{return f.onload=function(){var e;return 404===f.status?l.reject(f.response):(e=r?f.responseText:f.response,s&&(e=e.replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}).replace(/_/g,"")),e=JSON.parse(e),n&&n(e),l.resolve=t,l.resolve(e))},f.onprogress=function(){},f.ontimeout=function(){},f.onerror=function(){},window.setTimeout(function(){var t;try{return f.send(JSON.stringify(i))}catch(e){return t=e,l.reject(t)}},0),f}catch(c){return a=c,l.reject(a)}})},t.prototype.put=function(t,e,n){return this.oldIE?this.ajax("POST",t,n,e):this.ajax("PUT",t,n,e)},t.prototype.get=function(t,e){return this.ajax("GET",t,e,"")},t.prototype.getDecks=function(t){return this.get("/decks",t)},t.prototype.getSlides=function(t,e){return this.get("/assessments/"+t+"/slides",e)},t.prototype.addSlide=function(t,e,n,i,s){return this.put("/assessments/"+t+"/slides/"+e,{response:n,time_taken:i},s)},t.prototype.addSlides=function(t,e,n){return this.put("/assessments/"+t+"/slides",e,n)},t.prototype.getPersonalityTypes=function(t,e,n){var i,s,r,o,a;for(null==e&&(e=Object()),null==e.image_pack&&(e.image_pack="linear"),o=Array(),a=Object.keys(e),i=0,r=a.length;r>i;i++)s=a[i],o.push(s+"="+e[s]);return this.get("/assessments/"+t+"/personality_types?"+o.join("&"),n)},t.prototype.getPersonalityTraits=function(t,e,n){return this.get("/assessments/"+t+"/personality_traits/raw",n)},t.prototype.getCareers=function(t,e,n){var i,s,r,o,a;for(null==e&&(e=Object()),null==e.number_of_matches&&(e.number_of_matches=8),o=Array(),a=Object.keys(e),i=0,r=a.length;r>i;i++)s=a[i],o.push(s+"="+e[s]);return this.get("/assessments/"+t+"/matches/careers?"+o.join("&"),n)},t}(),Traitify=new ApiClient,Traitify.host="https://api-sandbox.traitify.com",Traitify.setProduction=function(t){return t?this.host="https://api.traitify.com":"https://api-sandbox.traitify.com"},Traitify.version="v1",function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(Mustache))}(this,function(t){function e(t){return"function"==typeof t}function n(t){return y(t)?"array":typeof t}function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(t,e){return null!=t&&"object"==typeof t&&e in t}function r(t,e){return m.call(t,e)}function o(t){return!r(g,t)}function a(t){return String(t).replace(/[&<>"'\/]/g,function(t){return v[t]})}function l(e,n){function s(){if(g&&!v)for(;m.length;)delete h[m.pop()];else m=[];g=!1,v=!1}function r(t){if("string"==typeof t&&(t=t.split(b,2)),!y(t)||2!==t.length)throw new Error("Invalid tags: "+t);a=new RegExp(i(t[0])+"\\s*"),l=new RegExp("\\s*"+i(t[1])),u=new RegExp("\\s*"+i("}"+t[1]))}if(!e)return[];var a,l,u,p=[],h=[],m=[],g=!1,v=!1;r(n||t.tags);for(var j,O,T,D,E,C,I=new f(e);!I.eos();){if(j=I.pos,T=I.scanUntil(a))for(var N=0,A=T.length;A>N;++N)D=T.charAt(N),o(D)?m.push(h.length):v=!0,h.push(["text",D,j,j+1]),j+=1,"\n"===D&&s();if(!I.scan(a))break;if(g=!0,O=I.scan(x)||"name",I.scan(k),"="===O?(T=I.scanUntil(w),I.scan(w),I.scanUntil(l)):"{"===O?(T=I.scanUntil(u),I.scan(S),I.scanUntil(l),O="&"):T=I.scanUntil(l),!I.scan(l))throw new Error("Unclosed tag at "+I.pos);if(E=[O,T,j,I.pos],h.push(E),"#"===O||"^"===O)p.push(E);else if("/"===O){if(C=p.pop(),!C)throw new Error('Unopened section "'+T+'" at '+j);if(C[1]!==T)throw new Error('Unclosed section "'+C[1]+'" at '+j)}else"name"===O||"{"===O||"&"===O?v=!0:"="===O&&r(T)}if(C=p.pop())throw new Error('Unclosed section "'+C[1]+'" at '+I.pos);return d(c(h))}function c(t){for(var e,n,i=[],s=0,r=t.length;r>s;++s)e=t[s],e&&("text"===e[0]&&n&&"text"===n[0]?(n[1]+=e[1],n[3]=e[3]):(i.push(e),n=e));return i}function d(t){for(var e,n,i=[],s=i,r=[],o=0,a=t.length;a>o;++o)switch(e=t[o],e[0]){case"#":case"^":s.push(e),r.push(e),s=e[4]=[];break;case"/":n=r.pop(),n[5]=e[2],s=r.length>0?r[r.length-1][4]:i;break;default:s.push(e)}return i}function f(t){this.string=t,this.tail=t,this.pos=0}function u(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function p(){this.cache={}}var h=Object.prototype.toString,y=Array.isArray||function(t){return"[object Array]"===h.call(t)},m=RegExp.prototype.test,g=/\S/,v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},k=/\s*/,b=/\s+/,w=/\s*=/,S=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;f.prototype.eos=function(){return""===this.tail},f.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var n=e[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},f.prototype.scanUntil=function(t){var e,n=this.tail.search(t);switch(n){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=e.length,e},u.prototype.push=function(t){return new u(t,this)},u.prototype.lookup=function(t){var n,i=this.cache;if(i.hasOwnProperty(t))n=i[t];else{for(var r,o,a=this,l=!1;a;){if(t.indexOf(".")>0)for(n=a.view,r=t.split("."),o=0;null!=n&&o<r.length;)o===r.length-1&&(l=s(n,r[o])),n=n[r[o++]];else n=a.view[t],l=s(a.view,t);if(l)break;a=a.parent}i[t]=n}return e(n)&&(n=n.call(this.view)),n},p.prototype.clearCache=function(){this.cache={}},p.prototype.parse=function(t,e){var n=this.cache,i=n[t];return null==i&&(i=n[t]=l(t,e)),i},p.prototype.render=function(t,e,n){var i=this.parse(t),s=e instanceof u?e:new u(e);return this.renderTokens(i,s,n,t)},p.prototype.renderTokens=function(t,e,n,i){for(var s,r,o,a="",l=0,c=t.length;c>l;++l)o=void 0,s=t[l],r=s[0],"#"===r?o=this.renderSection(s,e,n,i):"^"===r?o=this.renderInverted(s,e,n,i):">"===r?o=this.renderPartial(s,e,n,i):"&"===r?o=this.unescapedValue(s,e):"name"===r?o=this.escapedValue(s,e):"text"===r&&(o=this.rawValue(s)),void 0!==o&&(a+=o);return a},p.prototype.renderSection=function(t,n,i,s){function r(t){return o.render(t,n,i)}var o=this,a="",l=n.lookup(t[1]);if(l){if(y(l))for(var c=0,d=l.length;d>c;++c)a+=this.renderTokens(t[4],n.push(l[c]),i,s);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(t[4],n.push(l),i,s);else if(e(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,s.slice(t[3],t[5]),r),null!=l&&(a+=l)}else a+=this.renderTokens(t[4],n,i,s);return a}},p.prototype.renderInverted=function(t,e,n,i){var s=e.lookup(t[1]);return!s||y(s)&&0===s.length?this.renderTokens(t[4],e,n,i):void 0},p.prototype.renderPartial=function(t,n,i){if(i){var s=e(i)?i(t[1]):i[t[1]];return null!=s?this.renderTokens(this.parse(s),n,i,s):void 0}},p.prototype.unescapedValue=function(t,e){var n=e.lookup(t[1]);return null!=n?n:void 0},p.prototype.escapedValue=function(e,n){var i=n.lookup(e[1]);return null!=i?t.escape(i):void 0},p.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.1.3",t.tags=["{{","}}"];var j=new p;t.clearCache=function(){return j.clearCache()},t.parse=function(t,e){return j.parse(t,e)},t.render=function(t,e,i){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+n(t)+'" was given as the first argument for mustache#render(template, view, partials)');return j.render(t,e,i)},t.to_html=function(n,i,s,r){var o=t.render(n,i,s);return e(r)?void r(o):o},t.escape=a,t.Scanner=f,t.Context=u,t.Writer=p}),function(){function t(){if(0===e.length)return null;if(n&&i)for(var r=e.length;r--;)if("interactive"===e[r].readyState)return e[r];return"function"==typeof s&&t.doNotDeferToNativeMethod!==!0?s.call(document):null}var e=document.getElementsByTagName("script"),n="readyState"in(e[0]||document.createElement("script")),i=!window.opera||"[object Opera]"!==window.opera.toString(),s=function(e){function n(){var n,i=!0;return r&&(n=Object.getOwnPropertyDescriptor(e,"currentScript")||void 0,n&&"function"==typeof n.get&&n.get===t&&(i=!1)),i?e.currentScript:null}function i(t){var e;return null!=t&&(e=o?Object.getPrototypeOf(t):a?t.__proto__:null!=t.constructor?t.constructor.prototype:void 0),e}var s="currentScript"in e,r="function"==typeof Object.getOwnPropertyDescriptor,o="function"==typeof Object.getPrototypeOf,a="object"==typeof"test".__proto__,l=function c(e,o){var a,l;return s&&r&&e&&e!==Object.prototype&&o&&o!==Object.prototype&&(r&&(a=Object.getOwnPropertyDescriptor(e,"currentScript")||void 0,a&&"function"==typeof a.get&&(l=a.get)),l||(l=c(i(e),o))),l?l===t&&(l=void 0):l=n,l}(e,e);return l}(document);t.doNotDeferToNativeMethod=!1;var r=!("currentScript"in document),o="function"==typeof Object.defineProperty&&function(){var t;try{Object.defineProperty(document,"_xyz",{get:function(){return"blah"},configurable:!0}),t="blah"===document._xyz,delete document._xyz}catch(e){t=!1}return t}();document._currentScript=t,r&&o&&Object.defineProperty(document,"currentScript",{get:t})}(),Traitify.ui={deviceType:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"Phone":"desktop",widgets:Object(),widget:function(t,e){return this.widgets[t]=e},init:function(t){return null==t&&(t=Object()),this.Observable(t),null==t.slideDeck&&(t.slideDeck=Object()),null==t.slideDeck.target&&(t.slideDeck.target=".tf-slide-deck"),null==t.slideDeck.tag&&(t.slideDeck.tag="tf-slide-deck"),t.publicKey&&Traitify.setPublicKey(t.publicKey),delete t.publicKey,t.render=function(){var e=this,n="slides,blend,types,traits,career_matches",s="image_pack=linear&data="+n,r=t.slideDeck;for(i=0,len=r.length;i<len;i++)slideDeck=r[i],slideDeck.assessmentId=t.assessmentId;return Traitify.get("/assessments/"+t.assessmentId+"?"+s).then(function(n){if(t.slideDeck.mount=document.querySelector(t.slideDeck.target),t.slideDeck.mount.innerHTML="",void 0===n.completed_at){var i=Traitify.ui.widgets[t.slideDeck.tag],s=Object(),r=Object.keys(n);for(j=0,len1=r.length;j<len1;j++){var o=r[j];-1!==i.data.indexOf(o)&&(s[o]=n[o])}var a=Mustache.render(i.template,n);t.slideDeck.mount.innerHTML=a;var l=i.scripts;for(k=0,len2=l.length;k<len2;k++){var c=l[k],d=document.createElement("script");d.type="text/javascript",d.text=c,t.slideDeck.mount.appendChild(d)}t.slideDeck.mount.traitify.options=t,t.slideDeck.mount.traitify.data=s,t.slideDeck.mount.traitify.assessmentId=n.id,t.slideDeck.mount.traitify.initialize(),t.on("slideDeck.finish",function(){return e.render()})}else alert("hiya")}),this},t},Observable:function(t){return t.observable={events:Array()},t.on=function(e,n){return t.observable.events.push({name:e,callback:n}),t},t.trigger=function(e,n){var e=e.split(" "),s=[];for(i=0;i<e.length;i++){var r=e[i],o=new RegExp(r.replace(/\s/g,"|")),a=t.observable.events.filter(function(t){return o.test(t.name)});s.push(function(){var t=[];for(j=0;j<a.length;j++){var e=a[j];t.push(e.callback(n))}return t}())}return s},t}},Traitify.ui.widget("tf-slide-deck",{data:["slides"],template:'<div class="tf-slides">\n  <div class="tf-slides-container">\n    <div class="tf-progress-bar">\n      <div class="tf-progress-bar-inner"></div>\n    </div>\n    <div class="tf-caption">\n    </div>\n    <div class="tf-slide tf-current">\n    </div>\n    <div class="tf-slide tf-next">\n    </div>\n  </div>\n  <div class="tf-me-not-me-container">\n    <div class="tf-me">Me</div>\n    <div class="tf-not-me">Not Me</div>\n    <div class="tf-loading tf-hidden">\n      <span class="tf-loading-content">Loading...</span>\n      <span class="tf-click-content tf-hidden">Click to reload!</span>\n    </div>\n  </div>\n</div>\n<style>\n  .tf-slides{\n    font-family: arial;\n    text-align:center;\n  }\n  .tf-progress-bar{\n    position: relative;\n    height: 12px;\n    width: 100%;\n    z-index:1;\n    background-color: #aaa;\n    background-color: rgba(150, 150, 150, .5);\n  }\n  .tf-hidden{\n    display: none;\n  }\n  .tf-progress-bar .tf-progress-bar-inner{\n    height: 100%;\n    width: 0%;\n    background-color: #fff;\n    border-radius: 0px 8px 8px 0px;\n    -webkit-transition: width .8s ease-in-out;\n    -moz-transition: width .8s ease-in-out;\n    -o-transition: width .8s ease-in-out;\n    transition: width .8s ease-in-out;\n  }\n  .tf-caption{\n    position: absolute;\n    color: #fff;\n    width:100%;\n    background-color: #333;\n    background-color: rgba(0, 0, 0, .7);\n    height: 48px;\n    line-height: 48px;\n    font-size: 20px;\n    z-index:1;\n  }\n  .tf-slides .tf-slide{\n    width: 100%;\n    height: 100%;\n    background-size: cover;\n    display: inline-block;\n    left: 0%;\n    top: 0px;\n    position: absolute;\n  }\n  .tf-slides .tf-slide.tf-current{\n    left: 0%;\n    transform: scale(1,1);\n    zoom: 0.4\\9;\n    background-repeat: no-repeat;\n    -webkit-transition: left .6s ease;\n    -moz-transition: left .6s ease;\n    -o-transition: left .6s ease;\n    transition: left .6s ease;\n  }\n  .tf-slides .tf-slide.tf-next{\n    left: 100%;\n  }\n  .tf-slides .tf-slides-container{\n    height: 400px;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n  }\n  .tf-slides.min-width-720 .tf-slides-container {\n    height: 540px;\n  }\n  .tf-slides.min-width-720 .tf-slides-container .tf-slide.tf-current{\n    transform: scale(1,1);\n    zoom: 0.7\\9;\n  }\n  .tf-slides.min-width-1200 .tf-slides-container {\n    height: 700px;\n  }\n  .tf-slides.min-width-1200 .tf-slides-container .tf-slide.tf-current{\n    transform: scale(1,1);\n    zoom: 0.67\\9;\n  }\n\n  .tf-me-not-me-container{\n    width: 280px;\n    margin: 0px auto;\n    height: 43px;\n    border-radius: 23px;\n    line-height: 43px;\n    text-align: center;\n    position: relative;\n    z-index: 1;\n    margin-top: -80px;\n    overflow: hidden;\n    cursor: pointer;\n  }\n  .tf-me, .tf-not-me{\n    font-size: 20px;\n    height: 100%;\n    display: inline-block;\n    position: relative;\n    width: 50%;\n    float: left;\n    color: #fff;\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n  }\n  .tf-me{\n    background-color: #00aeef;\n  }\n  .tf-me:active{\n    background-color: #0B659A;\n  }\n  .tf-not-me{\n    background-color: #ff5e5e;\n  }\n  .tf-not-me:active{\n    background-color: #961111;\n  }\n  .tf-slides.tf-loading .tf-loading{\n    display: block;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: #ff5e5e;\n    color: #fff;\n  }\n  .tf-slides.tf-loading .tf-loading .tf-loading-content{\n    -webkit-animation: fade-in-and-out 2s ease-out;\n    -webkit-animation-iteration-count: infinite; \n  }\n  @-webkit-keyframes fade-in-and-out {\n    0% { opacity: 0.0;}\n    50% { opacity: 1.0;}\n    100% { opacity: 0.0;}\n  }\n</style>\n',scripts:['\n  (function(){\n    this.traitify = Object();\n    var slideDeck = this;\n    var traitify = this.traitify;\n    var $ = function(item){\n      if(typeof item == "string"){\n        var items = slideDeck.querySelectorAll(item);\n      } else {\n        var items = item;\n      }\n      items.each = function(callback){\n        for(i=0; i < this.length; i++){\n          callback(i, this[i])\n        }\n      }\n      items.html = function(html){\n        if(html){\n          return this[0].innerHTML = html;\n        }else{\n          return this[0].innerHTML;\n        }\n      }\n      items.find = function(item){\n        return $(this[0].querySelectorAll(item))\n      }\n      items.click = function(callback){\n        this.each(function(i, item){\n          item.onclick = callback;\n        })\n      }\n      items.addClass = function(className){\n        items.each(function(i, item){\n          item.className = item.className.replace(className, "")\n          item.className += " " + className\n        })\n        return items;\n      }\n      items.removeClass = function(className){\n        items.each(function(i, item){\n          item.className = item.className.replace(" " + className, "").replace(className, "")\n        })\n        return items;\n      }\n      items.hide = function(){\n        items.addClass("tf-hidden");\n      }\n      items.show = function(){\n        items.removeClass("tf-hidden")\n      }\n      items.css = function(options){\n        items.each(function(i,item){\n          $(Object.keys(options)).each(function(i, optionKey){\n            item.style[optionKey] = options[optionKey];\n          })\n        })\n      }\n      return items;\n    }\n    $.db = {\n      get: function(key){\n        return JSON.parse(sessionStorage.getItem(key));\n      },\n      set: function(key, value){\n        return sessionStorage.setItem(key, JSON.stringify(value));\n      }\n    }\n\n    this.traitify.initialize = function(){\n      /**********************************\n       * PREPARE DATA\n       **********************************/\n      this.nodes = Object();\n      this.nodes.slides = $(".tf-slides");\n      this.nodes.me = this.nodes.slides.find(".tf-me");\n      this.nodes.notMe = this.nodes.slides.find(".tf-not-me");\n      this.nodes.slidesContainer = this.nodes.slides.find(".tf-slides-container");\n      this.nodes.progressBar = this.nodes.slidesContainer.find(".tf-progress-bar");\n      this.nodes.progressBarInner = this.nodes.slidesContainer.find(".tf-progress-bar-inner");\n      this.nodes.currentSlide = $(".tf-slide.tf-current");\n      this.nodes.nextSlide = $(".tf-slide.tf-next");\n      this.nodes.caption = $(".tf-caption");\n      this.nodes.loading = $(".tf-loading .tf-loading-content");\n      this.nodes.clickToReload = $(".tf-loading .tf-click-content");\n\n      this.imageSize = "image_desktop_retina";\n\n      this.imageUrls = this.data.slides.map(function(slide){\n        return slide[traitify.imageSize];\n      })\n\n      traitify.slideLock = false;\n      this.db = Object();\n\n      this.db.set = function(key, data){\n        return $.db.set(traitify.assessmentId + key, data);\n      }\n\n      this.db.get = function(key){\n        return $.db.get(traitify.assessmentId + key);\n      }\n\n      traitify.data.slideResponses = traitify.db.get("slides");\n\n      if(!traitify.data.slideResponses){\n        traitify.data.slideResponses = Object();\n      }\n\n      var slideIds = Object.keys(traitify.data.slideResponses)\n      var playedSlides = traitify.data.slides.filter(function(slide, i){\n        if(slideIds.indexOf(slide.id) != -1){\n          return true;\n        }else{\n          return false;\n        }\n      })\n      var unplayedSlides = traitify.data.slides.filter(function(slide, i){\n        if(slideIds.indexOf(slide.id) == -1){\n          return true;\n        }else{\n          return false;\n        }\n      })\n      this.data.slides = playedSlides.concat(unplayedSlides);\n\n      this.index = Object.keys(traitify.data.slideResponses).length ||  0;\n\n      this.lastClick = new Date();\n\n      /************************************\n       * HANDLE TRANSITION \n       ************************************/\n      var i, undefined, el = document.createElement(\'div\'),\n      transitions = [\n        {key: \'transition\', css: \'transitionend\'},\n        {key: \'OTransition\', css: \'otransitionend\'},  // oTransitionEnd in very old Opera\n        {key: \'MozTransition\', css: \'transitionend\'},\n        {key: \'WebkitTransition\', css: \'webkitTransitionEnd\'}\n      ];\n      $(transitions).each(function(i, transition){\n        if (el.style[transition.key] !== undefined) {\n            traitify.transitionEnd = transition.css;\n        }\n      })\n\n      /*************************************\n       * RESIZE\n       *************************************/\n      this.resizeTimer = false;\n      var eventListener = function(item, eventListener, callback){\n        if(item.addEventListener){\n          item.addEventListener(eventListener, callback)\n        } else if (item.attachEvent){\n          item.attachEvent("on" + eventListener, callback)\n        }\n      }\n\n      eventListener(window, "resize", function(){\n          if(traitify.resizeTimeout){\n            clearTimeout(traitify.resizeTimeout);\n          }\n          traitify.resizeTimeout = setTimeout(function(){\n            traitify.options.trigger("resize");\n            traitify.resizeTimeout = false;\n          }, 100);\n      });\n\n      this.options.on("slideDeck.resize", function(){\n        width = slideDeck.offsetWidth;\n        traitify.nodes.slides.removeClass("min-width-1200");\n        traitify.nodes.slides.removeClass("min-width-720");\n        traitify.nodes.slides.removeClass("min-width-480");\n\n        if(width > 1200){\n          traitify.nodes.slides.addClass("min-width-1200");\n        } else if (width > 720){\n          traitify.nodes.slides.addClass("min-width-720");\n        } else{\n          traitify.nodes.slides.addClass("min-width-480");\n        }\n      })\n      this.options.trigger("slideDeck.resize");\n\n      this.options.on("slideDeck.transitionEnd", function(){\n        traitify.options.trigger("slideDeck.setView");\n        traitify.slideLock = false;\n      })\n\n      /************************************\n       * SET SLIDES\n       ************************************/\n      this.options.on("slideDeck.addSlides", function(){\n        var slideResponses = traitify.data.slideResponses;\n        responses = Object.keys(slideResponses).map(function(slide){\n          return slideResponses[slide];\n        })\n        Traitify.addSlides(traitify.options.assessmentId, responses).then(function(){\n          traitify.options.trigger("slideDeck.finish");\n        })\n      })\n      if(slideIds.length == this.data.slides.length){\n        this.options.trigger("slideDeck.addSlides");\n        return true;\n      }\n      this.options.on("slideDeck.setProgressBar", function(){\n        percent = Math.round(((traitify.index + 1) / traitify.data.slides.length) * 100);\n        traitify.nodes.progressBarInner.css({\n          width:  percent + "%"\n        });\n      })\n\n      this.options.trigger("slideDeck.setProgressBar");\n       \n      /************************************\n       * SET VIEW\n       ************************************/\n      this.options.on("slideDeck.setView", function(){\n        currentSlide = traitify.data.slides[traitify.index];\n        nextSlide = traitify.data.slides[traitify.index + 1];\n        traitify.nodes.caption.html(currentSlide.caption);\n        \n        traitify.nodes.currentSlide.css({\n          backgroundImage: "url(" + currentSlide[traitify.imageSize] + ")",\n          backgroundPosition: currentSlide.focus_x + "% " + currentSlide.focus_y + "%",\n          "background-position-x": currentSlide.focus_x + "%",\n          "background-position-y": currentSlide.focus_y + "%"\n        });\n        if(nextSlide && nextSlide[traitify.imageSize]){\n          traitify.nodes.nextSlide.addClass("tf-next").removeClass("tf-current");\n          traitify.nodes.nextSlide.css({\n            backgroundImage: "url(" + nextSlide[traitify.imageSize] + ")",\n            backgroundPosition: nextSlide.focus_x + "% " + nextSlide.focus_y + "%"\n          });\n        }\n      })\n\n      /************************************\n       * HANDLE ACTIONS\n       ************************************/\n      this.options.on("slideDeck.animate", function(){\n        if(!traitify.slideLock){\n          traitify.slideLock = true;\n          traitify.index++;\n          traitify.options.trigger("slideDeck.setProgressBar");\n\n          if(traitify.nodes.nextSlide){\n            traitify.nodes.nextSlide.removeClass("tf-next").addClass("tf-current");\n          }\n\n          if(!traitify.transitionEnd){\n            traitify.options.trigger("slideDeck.transitionEnd")\n          }\n        }\n      })\n\n      this.options.on("slideDeck.notMe slideDeck.me", function(data){\n        currentSlide = traitify.data.slides[traitify.index];\n        lastClick = traitify.lastClick;\n        traitify.lastClick = new Date();\n        traitify.data.slideResponses[currentSlide.id] = {\n          id: currentSlide.id,\n          response: data.value,\n          time_taken: traitify.lastClick - lastClick\n        }\n        traitify.db.set("slides", traitify.data.slideResponses)\n\n        var slideIds = Object.keys(traitify.data.slideResponses)\n        if(slideIds.length == traitify.data.slides.length){\n          traitify.options.trigger("slideDeck.addSlides");\n        }\n        traitify.options.trigger("slideDeck.animate");\n      })\n\n\n      /*********************************\n       * HOOKS\n       *********************************/\n      this.nodes.me.click(function(){\n        traitify.options.trigger("slideDeck.me", {value: true})\n      })\n\n      this.nodes.notMe.click(function(){\n        traitify.options.trigger("slideDeck.notMe", {value: false})\n      })\n\n      this.nodes.clickToReload.click(function(){\n        traitify.options.trigger("slideDeck.clickReload");\n      })\n\n      if(traitify.transitionEnd && window.addEventListener){\n        traitify.nodes.nextSlide[0].addEventListener( traitify.transitionEnd, function( event ) { \n          traitify.options.trigger("slideDeck.transitionEnd") \n        }, false );\n      }\n\n      /********************************\n       * NASTY IMAGE PRELOADING\n       ********************************/\n      this.imageTries = Object()\n      this.images = Array();\n      this.images.lastIndex = this.index;\n      this.loadImage = function(i){\n        if(traitify.imageUrls[i]){\n          if(!traitify.imageTries[i]){\n            traitify.imageTries[i]= 0;\n          }\n          traitify.images[i] = new Image();\n          traitify.images[i].src = traitify.imageUrls[i];\n          traitify.images[i].onerror = function(){\n            traitify.imageTries[i]++;\n            if(traitify.imageTries[i] < 30){\n              setTimeout(function(){\n                traitify.loadImage(i);\n              }, 1000)\n            }else{\n              traitify.images.lastIndex = i;\n              traitify.nodes.loading.hide();\n              traitify.nodes.clickToReload.show();\n            }\n          }\n          traitify.images[i].onload = function(){\n            setTimeout(function(){\n              traitify.loadImage(i + 1);\n            }, 300)\n            traitify.options.trigger("slideDeck.imageLoaded", this);\n            traitify.nodes.clickToReload.hide();\n            traitify.images.lastIndex = i;\n            traitify.nodes.slides.removeClass("tf-loading");\n          }\n        }\n      }\n      \n      traitify.options.trigger("slideDeck.setView");\n      this.loadImage(traitify.index);\n      \n    }\n  }).call(document.currentScript.parentNode);\n']}),Traitify.ui.widget("tf-personality-blend",{data:["blend"],template:'<div class="tf-personality-blend">\n  {{blend.first}}\n  there\n</div>\n',scripts:['\n  (function(){\n    this.traitify = Object();\n    var slideDeck = this;\n    var traitify = this.traitify;\n    var $ = function(item){\n      if(typeof item == "string"){\n        var items = slideDeck.querySelectorAll(item);\n      } else {\n        var items = item;\n      }\n      items.each = function(callback){\n        for(i=0; i < this.length; i++){\n          callback(i, this[i])\n        }\n      }\n      items.html = function(html){\n        if(html){\n          return this[0].innerHTML = html;\n        }else{\n          return this[0].innerHTML;\n        }\n      }\n      items.find = function(item){\n        return $(this[0].querySelectorAll(item))\n      }\n      items.click = function(callback){\n        this.each(function(i, item){\n          item.onclick = callback;\n        })\n      }\n      items.addClass = function(className){\n        items.each(function(i, item){\n          item.className = item.className.replace(className, "")\n          item.className += " " + className\n        })\n        return items;\n      }\n      items.removeClass = function(className){\n        items.each(function(i, item){\n          item.className = item.className.replace(" " + className, "").replace(className, "")\n        })\n        return items;\n      }\n      items.hide = function(){\n        items.addClass("tf-hidden");\n      }\n      items.show = function(){\n        items.removeClass("tf-hidden")\n      }\n      items.css = function(options){\n        items.each(function(i,item){\n          $(Object.keys(options)).each(function(i, optionKey){\n            item.style[optionKey] = options[optionKey];\n          })\n        })\n      }\n      return items;\n    }\n    $.db = {\n      get: function(key){\n        return JSON.parse(sessionStorage.getItem(key));\n      },\n      set: function(key, value){\n        return sessionStorage.setItem(key, JSON.stringify(value));\n      }\n    }\n\n    this.traitify.initialize = function(){\n      /**********************************\n       * PREPARE DATA\n       **********************************/\n      alert("here")\n    }\n  }).call(document.currentScript.parentNode);\n']
});